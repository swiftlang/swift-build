name: Pull request

permissions:
  contents: read

on:
  pull_request:
    types: [opened, reopened, synchronize]

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  xxx:
    name: XXX
    runs-on: ubuntu-latest
    steps:
      - name: Checkout swiftlang/github-workflows repository
        if: ${{ github.repository != 'swiftlang/github-workflows' }}
        uses: actions/checkout@v4
        with:
          repository: swiftlang/github-workflows
          ref: main
          path: github-workflows
      - name: Determine script-root path
        id: script_path
        run: |
          if [ "${{ github.repository }}" = "swiftlang/github-workflows" ]; then
            echo "root=$GITHUB_WORKSPACE" >> $GITHUB_OUTPUT
          else
            echo "root=$GITHUB_WORKSPACE/github-workflows" >> $GITHUB_OUTPUT
          fi
      - name: Test
        run: |
          echo the path is ```${{ steps.script_path.outputs.root }}```

          echo === ls -l $GITHUB_WORKSPACE ===
          ls -l $GITHUB_WORKSPACE

          echo === ls -l $GITHUB_WORKSPACE/.. ===
          ls -l $GITHUB_WORKSPACE/..
